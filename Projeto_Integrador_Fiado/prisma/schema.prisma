// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Company {
  id        Int       @id @default(autoincrement())

  name      String    
  category  String
  cnpj      String
  places    String
  zip_code  String
  addrres   String
  phone     String     

  productId Int         @map("product_Id")
  products  Product[]    

  userId     Int        @map("user_id")
  users      User       @relation(fields: [userId], references:[id])
  
  createAt  DateTime    @default(now())
  updateAt  DateTime    @updatedAt
  
  @@map("companies")
}





model Product {

  id                  Int               @id @default(autoincrement())
  name                String
  type                String 
  value               Float
  description         String 
  url_img             String
  
  companies           Company           @relation(fields: [companyId], references:[id])
  companyId           Int               @map("company_id")
  

  productPaymentId    Int             @map("product_paymet_id")
  product_payments    ProductPayment[]


  createAt  DateTime    @default(now())
  updateAt  DateTime    @updatedAt

  @@map("products")
}

model Payment {

  id              Int                   @id   @default(autoincrement())
  companyId       Int     
  value           Float
  
  paymentMethod   String   

  toDate            DateTime                    @map("to_date")
  dueDate           DateTime                    @map("due_date") 
  
  userId            Int                         @map("user_id")
  user              User                        @relation(fields: [userId], references: [id])
  
  productPaymentId  Int                @unique  @map("product_paymet_id")
  productpayments  ProductPayment               []


  createAt          DateTime                    @default(now())
  updateAt          DateTime                    @updatedAt
  
  @@map("payments")
}


model User{

  id          Int         @id   @default(autoincrement())
  name        String
  type        String
  email       String
  senha       String

  companies  Company[]
  
  createAt  DateTime    @default(now())
  updateAt  DateTime    @updatedAt
  payments  Payment[]

  @@map("users") 
}


model ProductPayment{
  id            Int         @id   @default(autoincrement()) 
  paymentMethod String            

  paymentId     Int               @map("payment_id")
  payment       Payment           @relation(fields: [paymentId], references: [id])

  productId     Int               @map("product_id")
  product       Product           @relation(fields: [productId], references: [id])

  createAt  DateTime              @default(now())
  updateAt  DateTime              @updatedAt

  @@map("product_payments") 
}

