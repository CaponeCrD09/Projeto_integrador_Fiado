// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Company {
  id        Int       @id @default(autoincrement())

  name      String    
  category  String
  cnpj      String
  places    String
  zip_code  String
  addrres   String
  phone     String     

  productId          Int @map("product_id")
  products  Products    @relation(fields: [productId], references:[id])

  userId             Int @map("user_id")
  users      User        @relation(fields: [userId], references:[id])
  
  createAt  DateTime    @default(now())
  updateAt  DateTime    @updateAt
  
  @@map("companies")

}





model Product {

  id                  Int               @id @default(autoincrement())
  name                String
  type                String 
  value               Float
  description         String 
  url_img             String
  
  companies           Company         @relation(fields: [companiesId], references:[id])
  
  products_payment    productspayment  @relation(fields: [productPaymentId], references:[id])

  createAt  DateTime    @default(now())
  updateAt  DateTime    @updateAt

  @@map("products")
}

model Payment {

  id              Int     @id   @default(autoincrement())
  companyId       Int     
  value           Float
  
  paymentMethod   String   @relation(fields: [paymentMethodId], references: [id])

  toDate          DateTime @map(to_date)
  dueDate         DateTime @map(due_date) 
  
  userId          Int      @map("user_id")
  user            User     @relation(fields: [userId], references: [id])
  
  createAt  DateTime    @default(now())
  updateAt  DateTime    @updateAt
  
  @@map("payments")
}


model User{

  id          Int         @id   @default(autoincrement())
  name        String
  type        String
  email       String
  senha       String

  companies  Company   @relation("user_company")
  
  createAt  DateTime    @default(now())
  updateAt  DateTime    @updateAt
  
  @@map("users") 
}


model ProductPayments{
  id            Int         @id   @default(autoincrement()) 
  paymentMethod String            @relation(fields: [paymentMethodId], references: [id])

  paymentId     Int               @map("payment_id")
  payment       Payment           @relation(fields: [paymentId], references: [id])

  productId     Int         

  createAt  DateTime              @default(now())
  updateAt  DateTime              @updateAt

  @@map("product_payments") 
}

