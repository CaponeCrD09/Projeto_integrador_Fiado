// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Companie {
  id        Int       @i @default(autoincrement())
  name      String    
  category  String
  cnpj      String
  places    String
  zip_code  String
  addrres   String
  phone     String     
  productId          Int @map("product_id")
  userId             Int @map("user_id")
  products  Products    @relation(fields: [productId], references:[id])
  uses      User        @relation(fields: [userId], references:[id])
  createAt  DateTime    @default(now())
  updateAt  DateTime    @updateAt
  
  @@map("companie")

}

model Products {

  id                  Int        @in @default(autoincrement())
  name                String
  type                String 
  value               Float
  description         String 
  url_img             String
  companies           Company[]
  products_payment    productspayment[]


}


model Payment {

  id              Int     @id   @default(autoincrement())
  companyId       Int     
  value           Float
  paymentMethod   String
  userId          Int      @map("user_id")
  user            User     @relation(fields: [userId], references: [id])
  toDate          DateTime @map(to_date)
  dueDate         DateTime @map(due_date) 
  @@maps("payments")
}


model User{

  id          Int         @id   @default(autoincrement())
  name        String
  type        String
  email       String
  senha       String


  userCompany  Companies[] @relation("Companies")

  @@maps("users") 
}


model ProductPayments{
  id            Int         @id   @default(autoincrement()) 
  productId     Int         @id
  paymentMethod String
  paymentId     Int         @map("payment_id")
  payment       Payment     @relation(fields: [paymentId], references: [id])
  @@map("product_payments") 
}

